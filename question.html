<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask Question - AgroSocialMedia</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Complete theme + base */
        :root {
            --bg-main: #06141f;
            --bg-main-alt: #020b12;
            --bg-card: rgba(3,12,24,0.95);
            --bg-card-soft: rgba(2,10,18,0.98);
            --text-main: #e8f5e9;
            --text-muted: #b0bec5;
            --accent: #66bb6a;
            --accent-strong: #43a047;
            --accent-soft: rgba(129,199,132,0.16);
            --border-subtle: rgba(255,255,255,0.12);
        }
        body.theme-light {
            --bg-main: #e8f5e9;
            --bg-main-alt: #f5f7fa;
            --bg-card: rgba(255,255,255,0.95);
            --bg-card-soft: #ffffff;
            --text-main: #263238;
            --text-muted: #607d8b;
            --accent: #2e7d32;
            --accent-strong: #43a047;
            --accent-soft: rgba(56,142,60,0.12);
            --border-subtle: rgba(0,0,0,0.08);
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        html,body{height:100%;}
        body{
            font-family:'Segoe UI',system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
            background:
                radial-gradient(circle at 0% 0%,rgba(56,142,60,0.18),transparent 55%),
                radial-gradient(circle at 100% 100%,rgba(3,155,229,0.18),transparent 55%),
                linear-gradient(135deg,var(--bg-main),var(--bg-main-alt) 45%,#040912);
            color:var(--text-main);
            line-height:1.7;
        }
        body::before{
            content:"";position:fixed;inset:0;pointer-events:none;
            background-image:
                linear-gradient(rgba(255,255,255,0.03) 1px,transparent 1px),
                linear-gradient(90deg,rgba(255,255,255,0.03) 1px,transparent 1px);
            background-size:38px 38px;opacity:0.35;mix-blend-mode:soft-light;z-index:-1;
        }
        .header{
            background:linear-gradient(120deg,rgba(56,142,60,0.96),rgba(129,199,132,0.9));
            color:#fdfdfd;padding:0.9rem 0;box-shadow:0 12px 30px rgba(0,0,0,0.55);
            position:sticky;top:0;z-index:1000;backdrop-filter:blur(18px);
        }
        .nav-container{
            max-width:1180px;margin:0 auto;display:flex;justify-content:space-between;
            align-items:center;flex-wrap:wrap;gap:0.75rem;padding:0 1.2rem;
        }
        .logo{font-size:1.6rem;font-weight:700;display:flex;align-items:center;gap:0.6rem;}
        .logo i{padding:0.45rem;border-radius:999px;background:rgba(255,255,255,0.22);
            box-shadow:0 0 18px rgba(255,255,255,0.35);}
        .nav-menu{display:flex;gap:1.3rem;align-items:center;}
        .nav-item{
            cursor:pointer;padding:0.4rem 1.1rem;border-radius:999px;
            transition:all 0.25s ease;display:flex;align-items:center;gap:0.45rem;
            font-size:0.98rem;text-decoration:none;color:inherit;background:rgba(255,255,255,0.06);
        }
        .nav-item:hover,.nav-item.active{
            background-color:rgba(255,255,255,0.25);transform:translateY(-1px);
            box-shadow:0 8px 22px rgba(0,0,0,0.22);
        }
        .nav-right{display:flex;align-items:center;gap:0.6rem;}
        .theme-toggle{
            padding:0.3rem 0.8rem;border-radius:999px;border:1px solid rgba(255,255,255,0.8);
            background:rgba(255,255,255,0.12);color:#ffffff;cursor:pointer;font-size:0.86rem;
            display:flex;align-items:center;gap:0.4rem;transition:all 0.25s ease;
        }
        .theme-toggle:hover{background:#ffffff;color:#388e3c;}
        .page-shell{max-width:900px;margin:1.8rem auto 2.2rem;padding:0 1.2rem;}
        .glass-card{
            background:radial-gradient(circle at top left,rgba(255,255,255,0.08),var(--bg-card));
            border-radius:18px;padding:1.6rem 1.5rem;
            box-shadow:0 18px 36px rgba(0,0,0,0.55);
            border:1px solid var(--border-subtle);backdrop-filter:blur(18px);
        }
        h1{margin-bottom:0.6rem;font-size:1.6rem;}
        p{color:var(--text-muted);margin-bottom:1rem;}
        label{display:block;margin-bottom:0.35rem;}
        textarea{
            width:100%;min-height:120px;padding:0.9rem 1rem;
            border-radius:12px;border:1px solid var(--border-subtle);
            background:var(--bg-card-soft);color:var(--text-main);
            resize:vertical;
        }
        button{
            margin-top:1.1rem;padding:0.7rem 1.4rem;border-radius:999px;border:none;
            background:linear-gradient(135deg,var(--accent),var(--accent-strong));
            color:#02110a;font-weight:600;cursor:pointer;
        }
    </style>
</head>
<body class="theme-dark">
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-seedling"></i>
                <span>AgroSocialMedia</span>
            </div>
            <nav class="nav-menu">
                <a class="nav-item" href="farmer.html"><i class="fas fa-home"></i>Home</a>
                <a class="nav-item" href="irrigation.html"><i class="fas fa-tint"></i>Irrigation</a>
                <a class="nav-item" href="harvest.html"><i class="fas fa-tractor"></i>Harvest</a>
                <a class="nav-item" href="community.html"><i class="fas fa-users"></i>Community</a>
            </nav>
            <div class="nav-right">
                <button id="themeToggle" class="theme-toggle">
                    <i class="fas fa-moon"></i><span>Night</span>
                </button>
            </div>
        </div>
    </header>

    <main class="page-shell">
        <section class="glass-card">
            <h1>Ask a Question</h1>
            <p>Describe your crop, soil, and weather so other farmers can give precise answers.</p>
            <form>
                <label for="question">Your question:</label>
                <textarea id="question" name="question" required></textarea>
                <button type="submit">Submit</button>
            </form>
        </section>

        <!-- Weather card (AUTO-DETECT ONLY) -->
        <section class="glass-card" style="margin-top:1.2rem;">
            <h1 style="font-size:1.3rem;margin-bottom:0.4rem;">Current Weather</h1>
            <p id="weatherInfo" style="margin-bottom:0.6rem;">Detecting your location...</p>
            <small style="display:block;color:var(--text-muted);font-size:0.8rem;">
                Enable location access for automatic weather updates.
            </small>
        </section>
    </main>

    <footer style="text-align:center;margin-bottom:1.5rem;color:var(--text-muted);font-size:0.85rem;">
        <p>© 2025 AgroSocialMedia. This project is owned by Teja Lakshman.</p>
    </footer>

    <script src="firebase-config.js"></script>
    <script>
        // same theme toggle logic
        const themeToggleBtn = document.getElementById('themeToggle');
        const body = document.body;
        function applyTheme(theme){
            body.classList.remove('theme-light','theme-dark');
            body.classList.add(theme);
            if(theme==='theme-light'){
                themeToggleBtn.innerHTML='<i class="fas fa-moon"></i><span>Night</span>';
            }else{
                themeToggleBtn.innerHTML='<i class="fas fa-sun"></i><span>Light</span>';
            }
            localStorage.setItem('raythu-theme',theme);
        }
        const savedTheme = localStorage.getItem('raythu-theme') || 'theme-dark';
        applyTheme(savedTheme);
        themeToggleBtn.addEventListener('click',()=>{
            const current = body.classList.contains('theme-light')?'theme-light':'theme-dark';
            const next = current==='theme-light'?'theme-dark':'theme-light';
            applyTheme(next);
        });

        const weatherInfoEl = document.getElementById('weatherInfo');

        async function fetchOpenWeather(lat, lon) {
            try {
                if (!OPENWEATHER_API_KEY || OPENWEATHER_API_KEY === 'YOUR_OPENWEATHER_API_KEY') {
                    weatherInfoEl.textContent = 'Weather API key not configured.';
                    return;
                }
                const res = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${OPENWEATHER_API_KEY}`
                );
                const data = await res.json();
                if (!res.ok || !data.main) throw new Error('Weather error');
                const temp = Math.round(data.main.temp);
                const hum  = data.main.humidity;
                const desc = data.weather && data.weather[0] ? data.weather[0].description : 'Weather';
                const label = data.name || 'Your location';
                weatherInfoEl.textContent = `${label}: ${desc}, ${temp}°C • Humidity ${hum}%`;
            } catch (e) {
                console.error('Weather fetch error:', e);
                weatherInfoEl.textContent = 'Could not load weather. Check connection.';
            }
        }

        function initWeather() {
            if (typeof OPENWEATHER_API_KEY === 'undefined') {
                weatherInfoEl.textContent = 'firebase-config.js not loaded.';
                return;
            }
            if (!navigator.geolocation) {
                weatherInfoEl.textContent = 'Geolocation not supported.';
                return;
            }
            navigator.geolocation.getCurrentPosition(
                (pos) => fetchOpenWeather(pos.coords.latitude, pos.coords.longitude),
                (err) => {
                    console.error('Geolocation error:', err);
                    if (err.code === 1) {
                        weatherInfoEl.textContent = 'Location denied. Enable in settings.';
                    } else {
                        weatherInfoEl.textContent = 'Unable to get location.';
                    }
                }
            );
        }

        initWeather();
    </script>
</body>
</html>
